						ASSUME	CS:CODE,DS:CODE


VERSION_STRING			EQU		"VERSION 20200922"

						.386p
CODE					SEGMENT	USE16

						INCLUDE		IODEF.ASM
						INCLUDE		DEF.ASM

MAIN					PROC
						JMP		REALMAIN
						DW		0
						DB		"RESCUE"
REALMAIN:

						CLI
						PUSH	CS
						POP		DS

						CALL	INITGRAPHICS
						CALL	VRAMMODE
						CALL	CLS

						MOV		AL,15
						CALL	COLOR

						MOV		AX,0101H
						CALL	LOCATE
						MOV		SI,OFFSET MESSAGE_LINE0
						CALL	PRINT_TALL

						MOV		AX,0102H
						CALL	LOCATE
						MOV		SI,OFFSET MESSAGE_LINE1
						CALL	PRINT_TALL

						MOV		AX,0103H
						CALL	LOCATE
						MOV		SI,OFFSET MESSAGE_LINE2
						CALL	PRINT_TALL


						CALL	BOOT_FROM_SCSI_CD

@@:
						JMP			@b

MAIN					ENDP

						INCLUDE		UTIL.ASM
						INCLUDE		DRAWFONT.ASM
						INCLUDE		MEMBANK.ASM
						INCLUDE		../SCSILIB/SCSIIO.ASM
						INCLUDE		SCSIUTIL.ASM
						INCLUDE		CDBOOT.ASM

MESSAGE_LINE0			DB	"FM TOWNS RESCUE BOOT LOADER BY CAPTAINYS",0
MESSAGE_LINE1			DB	VERSION_STRING,0
MESSAGE_LINE2			DB	"http://www.ysflight.com",0

CODE					ENDS

						END		MAIN
