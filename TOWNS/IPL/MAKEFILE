BUILD:
	MD BUILD

EXE:
	MD EXE

DISKIMG:
	MD DISKIMG



BUILD\LAYOUT.OBJ : LAYOUT.C
	HCD386 LAYOUT.C -OBJ BUILD\LAYOUT.OBJ

BUILD\LAYOUT.EXP : BUILD\LAYOUT.OBJ
	386LINK BUILD\LAYOUT.OBJ -LIB C:\hc386\small\hce.lib C:\hc386\small\na.lib -EXE BUILD\LAYOUT.EXP



BUILD\CUTOUT.OBJ : CUTOUT.C
	HCD386 CUTOUT.C -OBJ BUILD\CUTOUT.OBJ

BUILD\CUTOUT.EXP : BUILD\CUTOUT.OBJ
	386LINK BUILD\CUTOUT.OBJ -LIB C:\hc386\small\hce.lib C:\hc386\small\na.lib -EXE BUILD\CUTOUT.EXP



BUILD\TESTFONT.OBJ : TESTFONT.ASM IODEF.ASM DRAWFONT.ASM MEMBANK.ASM
	MASM TESTFONT.ASM BUILD\TESTFONT.OBJ BUILD\TESTFONT.LST NUL

EXE\TESTFONT.EXE : BUILD\TESTFONT.OBJ
	LINK BUILD\TESTFONT.OBJ;
	COPY TESTFONT.EXE EXE\.
	DEL TESTFONT.EXE



BUILD\LOADER.OBJ : LOADER.ASM LOADYSSC.ASM CDBOOT.ASM IODEF.ASM DEF.ASM DRAWFONT.ASM MEMBANK.ASM ..\SCSILIB\SCSIIO.ASM SCSIUTIL.ASM UTIL.ASM GRAPHICS.ASM ..\RESOURCE\AOMORI.ASM UI.ASM HID_IO.ASM
	MASM LOADER.ASM BUILD\LOADER.OBJ BUILD\LOADER.LST NUL

BUILD\LOADER.BIN : BUILD\LOADER.OBJ
	LINK BUILD\LOADER.OBJ;
	EXE2BIN LOADER.EXE BUILD\LOADER.BIN
	DEL LOADER.EXE
	



BUILD\CD_IPL.OBJ : CD_IPL.ASM IODEF.ASM DEF.ASM DRAWFONT.ASM MEMBANK.ASM ..\SCSILIB\SCSIIO.ASM
	MASM CD_IPL.ASM BUILD\CD_IPL.OBJ BUILD\CD_IPL.LST NUL

BUILD\CD_IPL.BIN : BUILD\CD_IPL.OBJ
	LINK BUILD\CD_IPL.OBJ;
	EXE2BIN CD_IPL.EXE BUILD\CD_IPL.BIN
	DEL CD_IPL.EXE



BUILD\FD_IPL.OBJ : FD_IPL.ASM IODEF.ASM DEF.ASM DRAWFONT.ASM MEMBANK.ASM
	MASM FD_IPL.ASM BUILD\FD_IPL.OBJ BUILD\FD_IPL.LST NUL

BUILD\FD_IPL.BIN : BUILD\FD_IPL.OBJ
	LINK BUILD\FD_IPL.OBJ;
	EXE2BIN FD_IPL.EXE BUILD\FD_IPL.BIN
	DEL FD_IPL.EXE



DISKIMG\FDMINI.BIN : DISKIMG\FDIMAGE.BIN
	RUN386 BUILD\CUTOUT.EXP DISKIMG\FDIMAGE.BIN 0 163840 DISKIMG\FDMINI.BIN

DISKIMG\FDIMAGE.BIN : BUILD\FD_IPL.BIN BUILD\LOADER.BIN ..\YSSCSICD\SYS\YSSCSICD.SYS
	RUN386 BUILD\LAYOUT.EXP DISKIMG\FDIMAGE.BIN 1232 FDFAT.BIN 1024 FDFAT.BIN 3072 FDDIR.BIN 5120
	RUN386 BUILD\LAYOUT.EXP DISKIMG\FDIMAGE.BIN OVERWRITE BUILD\FD_IPL.BIN 0 BUILD\LOADER.BIN 11264 ..\YSSCSICD\SYS\YSSCSICD.SYS 65536



DISKIMG\CDIMAGE.ISO : BUILD\CD_IPL.BIN BUILD\LOADER.BIN ..\YSSCSICD\SYS\YSSCSICD.SYS
	RUN386 BUILD\LAYOUT.EXP DISKIMG\CDIMAGE.ISO 160 BUILD\CD_IPL.BIN 0 BUILD\LOADER.BIN 8192 ..\YSSCSICD\SYS\YSSCSICD.SYS 65536



BUILD\TESTIPL.OBJ : TESTIPL.ASM IODEF.ASM DRAWFONT.ASM MEMBANK.ASM
	MASM TESTIPL.ASM BUILD\TESTIPL.OBJ BUILD\TESTIPL.LST NUL

BUILD\TESTIPL.BIN : BUILD\TESTIPL.OBJ
	LINK BUILD\TESTIPL.OBJ;
	EXE2BIN TESTIPL.EXE BUILD\TESTIPL.BIN
	DEL TESTIPL.EXE

EXE\TESTFD.BIN : BUILD\TESTIPL.BIN
	RUN386 BUILD\LAYOUT.EXP EXE\TESTFD.BIN 1232 BUILD\TESTIPL.BIN 0

EXE\TESTHD.BIN : BUILD\TESTIPL.BIN
	RUN386 BUILD\LAYOUT.EXP EXE\TESTHD.BIN 1232 BUILD\TESTIPL.BIN 0
