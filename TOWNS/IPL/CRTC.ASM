TOWNSIO_VIDEO_OUT_ADDR	EQU		0448H
TOWNSIO_VIDEO_OUT_DATA	EQU		044AH

TOWNSIO_PALETTE_CODE	EQU		0FD90H



RESETPALETTE16			PROC
						PUSH	SI
						PUSH	DX
						PUSH	AX

						MOV		DX,TOWNSIO_VIDEO_OUT_ADDR
						MOV		AL,1	; ADDRESS 1
						OUT		DX,AL

						MOV		DX,TOWNSIO_VIDEO_OUT_DATA
						MOV		AL,29H	; Layer 1 16-color Palette Priority=Layer 1
						OUT		DX,AL
						CALL	RESETPALETTE16_PAGE

						MOV		DX,TOWNSIO_VIDEO_OUT_DATA
						MOV		AL,09H	; Layer 1 16-color Palette Priority=Layer 1
						OUT		DX,AL
						CALL	RESETPALETTE16_PAGE

						POP		AX
						POP		DX
						POP		SI
						RET
RESETPALETTE16			ENDP



RESETPALETTE16_PAGE		PROC
						MOV		DX,TOWNSIO_PALETTE_CODE
						MOV		SI,OFFSET PALETTE16_DATA
						MOV		AH,64
@@:
						MOV		AL,CS:[SI]
						INC		SI
						OUT		DX,AL
						ADD		DL,2
						AND		DL,0F7H
						DEC		AH
						JNE		@B

						RET
RESETPALETTE16_PAGE		ENDP

;								CODE,   B,   R,   G
PALETTE16_DATA			DB		0,   000H,000H,000H
						DB		1,   070H,000H,000H
						DB		2,   000H,070H,000H
						DB		3,   070H,070H,000H
						DB		4,   000H,000H,070H
						DB		5,   070H,000H,070H
						DB		6,   000H,070H,070H
						DB		7,   070H,070H,070H
						DB		8,   000H,000H,000H
						DB		9,   0F0H,060H,060H
						DB		10,  000H,0F0H,000H
						DB		11,  0F0H,0F0H,000H
						DB		12,  000H,000H,0F0H
						DB		13,  0F0H,000H,0F0H
						DB		14,  000H,0F0H,0F0H
						DB		15,  0F0H,0F0H,0F0H

